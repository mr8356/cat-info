<!DOCTYPE html>
<html>
	<head>
		<!-- head ë¶€ë¶„ì— í…ìŠ¤íŠ¸ ì¸ì½”ë”© íƒ€ì… utf-8ë¡œ ì‘ì„± -->
		<meta charset="utf-8" /> 
		<!-- ë¸Œë¼ìš°ì € ìƒë‹¨ íƒ­ì— ì œëª©ìœ¼ë¡œ ë‚˜ì˜´ -->
	<title>íšŒì›ê°€ì… ì‹¤ìŠµ</title>
	<!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		function check_password(pass){
			var exp = /[@#$]+[a-z]+[A-Z]+[^~`|%^&*\'";:/?]/;
			return exp.test(pass);
		}
		// show í•¨ìˆ˜
		function show() {
			var form = document.myform; //ì…ë ¥ì–‘ì‹ì„ ê°€ì ¸ì˜´.
			var email = form["email"].value;
			var name = form["name"].value;
			var password = form["pass"].value;
			if(email.length==0){
				alert("ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.");
				return false;
			}
			else if(email.length<6){
				alert("ì´ë©”ì¼ì€ 6ìë¦¬ ì´ìƒì…ë‹ˆë‹¤.");
				return false;
			}
			else if(name.length==0){
				alert("ì´ë¦„ì€ í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.");
				return false;
			}
			else if(password.length==0){
				alert("ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.");
				return false;
			}
			else if(password.length<6){
				alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 6ìë¦¬ ì´ìƒì…ë‹ˆë‹¤.");
				return false;
			}
			else if(!(/[0-9]+/).test(password)){
				alert("ë¹„ë°€ë²ˆí˜¸ì— ìˆ«ìê°€ í¬í•¨ë˜ì–´ì•¼í•©ë‹ˆë‹¤.");
				return false;
			}
			else if(!(/[a-zA-Z]+/).test(password)){
				alert("ë¹„ë°€ë²ˆí˜¸ì— ì˜ë¬¸ì´ í¬í•¨ë˜ì–´ì•¼í•©ë‹ˆë‹¤.");
				return false;
			}
			else if((/[~`!%^&*|\'";:/?]+/).test(password)){
				alert("ë¹„ë°€ë²ˆí˜¸ì— íŠ¹ìˆ˜ë¬¸ì ~`|%^&*\\'\";:/?ëŠ” í¬í•¨ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
				return false;
			}
			else {
				var postReq = $.ajax({
					type: "POST",
					url: "/cats",
					data: {
						"email":email,
						"name":name,
						"password":password
					},
					dataType: "JSON",
					success : function(result){
						alert(result.name);
					}
				});
			}
		}
		function get() {
			var getReq = $.ajax({
					type: "GET",
					url: "/cats"
			});
			getReq.done(function (data) {
				var tb = $("<table/>");
				var row = $("<tr/>").append(
					$("<th/>").text("ì´ë©”ì¼"),
					$("<th/>").text("id"),
					$("<th/>").text("ì´ë¦„"),
				);
				tb.append(row);
				for(var i = 0; i<data.length; i++){
					var email= data[i].email;
					var id = data[i].id;
					var name = data[i].name;
					var row = $("<tr/>").append(
						$("<th/>").text(email),
						$("<th/>").text(id),
						$("<th/>").text(name));
					tb.append(row);
				}
				$("#textbox").html(tb);
			});
		}
	</script>
	</head>
	<body>
		<h1>â–¶ï¸ê³ ì–‘ì´ğŸ˜» íšŒì›ê°€ì…<br></h1>
		<form method="post" name="myform">
		<table border="1" bgcolor="white" bordercolor="black">
			<tr>
				<td>* ì´ë©”ì¼:</td>
				<td><input type="text" name="email" maxlength="20" size="30" /></td>
			</tr>
			<tr>
				<td>* ì´ë¦„ :</td>
				<td><input type="text" name="name" maxlength="12" size="15" /></td>
			</tr>
			<tr>
				<td>* ë¹„ë°€ë²ˆí˜¸ :</td>
				<td><input type="password" name="pass" maxlength="10" size="15" /></td>
			</tr>
		<!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‘ì„±í•œ ê²ƒ ì‹¤í–‰ -->
		<br><input type="button" value="íšŒì› ê°€ì…" onclick="show();">
		<br><input type="button" value="ë¶ˆëŸ¬ì˜¤ê¸°" onclick="get();">
		<input type="reset" value="ë‹¤ì‹œ ì‘ì„±">
		<div id="textbox">

		</div>
	</form>
	</body>
</html>